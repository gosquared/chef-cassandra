# Cassandra storage config YAML 

cluster_name: '<%= @node[:cassandra][:cluster_name] %>'

num_tokens: '<%= @node[:cassandra][:num_tokens] %>'

initial_token:

hinted_handoff_enabled: <%= @node[:cassandra][:hinted_handoff_enabled] %>

max_hint_window_in_ms: <%= @node[:cassandra][:max_hint_window_in_ms] %>
hinted_handoff_throttle_in_kb: <%= @node[:cassandra][:hinted_handoff_throttle_in_kb] %>
max_hints_delivery_threads: <%= @node[:cassandra][:hinted_handoff_throttle_in_kb] %>

populate_io_cache_on_flush: <%= @node[:cassandra][:populate_io_cache_on_flush] %>

authenticator: org.apache.cassandra.auth.AllowAllAuthenticator

authorizer: org.apache.cassandra.auth.AllowAllAuthorizer

partitioner: <%= @node[:cassandra][:partitioner] %>

data_file_directories:
    - <%= @node[:cassandra][:data_file_directories] %>

commitlog_directory: <%= node[:cassandra][:commitlog_directory] %>

disk_failure_policy: <%= node[:cassandra][:disk_failure_policy] %>

key_cache_size_in_mb: <%= node[:cassandra][:key_cache_size_in_mb] %>

key_cache_save_period: <%= node[:cassandra][:key_cache_save_period] %>

# key_cache_keys_to_save: <%= node[:cassandra][:key_cache_keys_to_save] %>

row_cache_size_in_mb: <%= node[:cassandra][:key_cache_keys_to_save] %>

row_cache_save_period: <%= node[:cassandra][:key_cache_keys_to_save] %>

# row_cache_keys_to_save: <%= node[:cassandra][:key_cache_keys_to_save] %>

row_cache_provider: SerializingCacheProvider

saved_caches_directory: <%= node[:cassandra][:saved_caches_directory] %>

commitlog_sync: <%= node[:cassandra][:commitlog_sync] %>
commitlog_sync_period_in_ms: <%= node[:cassandra][:commitlog_sync_period_in_ms] %>

commitlog_segment_size_in_mb: <%= node[:cassandra][:commitlog_segment_size_in_mb] %>

seed_provider:
    - class_name: <%= node[:cassandra][:seed_provider_class_name] %>
      parameters:
          - seeds: "<%= node[:cassandra][:seed] %>"

flush_largest_memtables_at: <%= @node[:cassandra][:flush_largest_memtables_at] %>

reduce_cache_sizes_at: <%= @node[:cassandra][:reduce_cache_sizes_at] %>
reduce_cache_capacity_to: <%= @node[:cassandra][:reduce_cache_capacity_to] %>


concurrent_reads: <%= @node[:cassandra][:concurrent_reads] %>
concurrent_writes: <%= @node[:cassandra][:concurrent_reads] %>

# memtable_total_space_in_mb: 2048

# commitlog_total_space_in_mb: 4096

# memtable_flush_writers: 1

memtable_flush_queue_size: <%= @node[:cassandra][:concurrent_reads] %>

trickle_fsync: <%= @node[:cassandra][:trickle_fsync] %>
trickle_fsync_interval_in_kb: <%= @node[:cassandra][:trickle_fsync_interval_in_kb] %>

storage_port: <%= node[:cassandra][:storage_port] %>
ssl_storage_port: <%= node[:cassandra][:ssl_storage_port] %>

listen_address: <%= node[:cassandra][:listen_address] %>

# broadcast_address: 1.2.3.4

start_native_transport: false
native_transport_port: 9042
# native_transport_min_threads: 16
# native_transport_max_threads: 128

start_rpc: <%= node[:cassandra][:start_rpc] %>
rpc_address: <%= node[:cassandra][:rpc_address] %>
rpc_port: <%= node[:cassandra][:rpc_port] %>
rpc_keepalive: <%= node[:cassandra][:rpc_keepalive] %>
rpc_server_type: <%= node[:cassandra][:rpc_server_type] %>
# rpc_min_threads: 16
# rpc_max_threads: 2048
# rpc_send_buff_size_in_bytes:
# rpc_recv_buff_size_in_bytes:

thrift_framed_transport_size_in_mb: <%= node[:cassandra][:thrift_framed_transport_size_in_mb] %>
thrift_max_message_length_in_mb: <%= node[:cassandra][:thrift_max_message_length_in_mb] %>

incremental_backups: <%= node[:cassandra][:incremental_backups] %>
snapshot_before_compaction: <%= node[:cassandra][:snapshot_before_compaction] %>
auto_snapshot: <%= node[:cassandra][:auto_snapshot] %>

column_index_size_in_kb: <%= node[:cassandra][:column_index_size_in_kb] %>
in_memory_compaction_limit_in_mb: <%= node[:cassandra][:in_memory_compaction_limit_in_mb] %>

# concurrent_compactors: <%= node[:cassandra][:concurrent_compactors] %>
multithreaded_compaction: <%= node[:cassandra][:multithreaded_compaction] %>
compaction_throughput_mb_per_sec: <%= node[:cassandra][:compaction_throughput_mb_per_sec] %>
compaction_preheat_key_cache: <%= node[:cassandra][:compaction_preheat_key_cache] %>
stream_throughput_outbound_megabits_per_sec: <%= node[:cassandra][:stream_throughput_outbound_megabits_per_sec] %>

read_request_timeout_in_ms: <%= node[:cassandra][:read_request_timeout_in_ms] %>
range_request_timeout_in_ms: <%= node[:cassandra][:range_request_timeout_in_ms] %>
write_request_timeout_in_ms: <%= node[:cassandra][:write_request_timeout_in_ms] %>
truncate_request_timeout_in_ms: <%= node[:cassandra][:truncate_request_timeout_in_ms] %>
request_timeout_in_ms: <%= node[:cassandra][:request_timeout_in_ms] %>

cross_node_timeout: <%= node[:cassandra][:cross_node_timeout] %>

# streaming_socket_timeout_in_ms: 0

# phi_convict_threshold: 8

endpoint_snitch: <%= node[:cassandra][:endpoint_snitch] %>

dynamic_snitch_update_interval_in_ms: <%= node[:cassandra][:dynamic_snitch_update_interval_in_ms] %>
dynamic_snitch_reset_interval_in_ms: <%= node[:cassandra][:dynamic_snitch_reset_interval_in_ms] %>
dynamic_snitch_badness_threshold: <%= node[:cassandra][:dynamic_snitch_badness_threshold] %>


request_scheduler: org.apache.cassandra.scheduler.NoScheduler

# request_scheduler_options:
#    throttle_limit: 80
#    default_weight: 5
#    weights:
#      Keyspace1: 1
#      Keyspace2: 5
# request_scheduler_id: keyspace

index_interval: <%= node[:cassandra][:index_interval] %>

server_encryption_options:
    internode_encryption: <%= node[:cassandra][:server_encryption_options_internode_encryption] %>
    keystore: <%= node[:cassandra][:server_encryption_options_keystore] %>
    keystore_password: <%= node[:cassandra][:server_encryption_options_keystore_password] %>
    truststore: <%= node[:cassandra][:server_encryption_options_truststore] %>
    truststore_password: <%= node[:cassandra][:server_encryption_options_truststore_password] %>
    # More advanced defaults below:
    # protocol: TLS
    # algorithm: SunX509
    # store_type: JKS
    # cipher_suites: [TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA]

client_encryption_options:
    enabled: <%= node[:cassandra][:client_encryption_options_enabled] %>
    keystore: <%= node[:cassandra][:client_encryption_options_keystore] %>
    keystore_password: <%= node[:cassandra][:client_encryption_options_keystore_password] %>
    # More advanced defaults below:
    # protocol: TLS
    # algorithm: SunX509
    # store_type: JKS
    # cipher_suites: [TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA]

internode_compression: <%= node[:cassandra][:internode_compression] %>
